--- a/zpipe.cpp	2009-10-01 04:33:36.000000000 +0200
+++ b/zpipe.cpp	2010-01-18 01:13:16.000000000 +0100
@@ -45,6 +45,13 @@
 #include <fcntl.h> // for setmode(), requires g++
 #include <assert.h>
 
+#ifndef O_BINARY
+#define O_BINARY 0
+#endif
+#ifndef setmode
+#define setmode(a,b)
+#endif
+
 const int LEVEL=1;  // ZPAQ level 0=experimental 1=final
 
 // 1, 2, 4 byte unsigned integers
